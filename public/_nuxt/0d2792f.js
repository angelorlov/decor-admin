(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{428:function(t,e,r){"use strict";r.r(e);var o={props:{title:{type:String,default:""},items:{type:Array,default:function(){return[]}}},data:function(){return{monthName:"",day:""}},mounted:function(){var t=new Date;this.monthName=["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"][t.getMonth()],this.day=t.getDate()}},n=r(2),component=Object(n.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"kt-subheader   kt-grid__item",attrs:{id:"kt_subheader"}},[r("div",{staticClass:"kt-container  kt-container--fluid "},[r("div",{staticClass:"kt-subheader__main"},[r("h3",{staticClass:"kt-subheader__title"},[t._v(t._s(t._f("capitalize")(t.title)))]),t._v(" "),r("span",{staticClass:"kt-subheader__separator kt-hidden"}),t._v(" "),r("div",{staticClass:"kt-subheader__breadcrumbs"},[r("n-link",{staticClass:"kt-subheader__breadcrumbs-home",attrs:{to:{path:"/"}}},[r("i",{staticClass:"flaticon2-shelter"})]),t._v(" "),t._l(t.items,(function(e,i){return[r("span",{staticClass:"kt-subheader__breadcrumbs-separator"}),t._v(" "),r("n-link",{staticClass:"kt-subheader__breadcrumbs-link",attrs:{to:{name:e.name,params:e.params}}},[t._v("\n                    "+t._s(t._f("capitalize")(e.title))+" ")])]}))],2)]),t._v(" "),r("div",{staticClass:"kt-subheader__toolbar"},[r("div",{staticClass:"kt-subheader__wrapper"},[r("a",{staticClass:"btn btn-sm btn-elevate btn-brand btn-elevate",attrs:{href:"#",id:"kt_dashboard_daterangepicker","data-toggle":"kt-tooltip",title:"","data-placement":"left","data-original-title":"Йо! Это я, сегодняшняя дата!"}},[r("span",{staticClass:"kt-opacity-7",attrs:{id:"kt_dashboard_daterangepicker_title"}},[t._v("Сегодня:")]),t._v(" \n                    "),r("span",{staticClass:"kt-font-bold",attrs:{id:"kt_dashboard_daterangepicker_date"}},[t._v(t._s(t.monthName)+" "+t._s(t.day))]),t._v(" "),r("i",{staticClass:"flaticon-calendar-with-a-clock-time-tools kt-padding-l-5 kt-padding-r-0"})])])])])])}),[],!1,null,"06a05328",null);e.default=component.exports},429:function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var o=r(430),n=r(431),l=function(){function t(){Object(o.a)(this,t),this.errors={}}return Object(n.a)(t,[{key:"get",value:function(t){if(this.errors[t])return this.errors[t][0]}},{key:"record",value:function(t){this.errors=t.errors}}]),t}()},456:function(t,e,r){var content=r(545);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(8).default)("695a54fc",content,!0,{sourceMap:!1})},544:function(t,e,r){"use strict";var o=r(456);r.n(o).a},545:function(t,e,r){(e=r(7)(!1)).push([t.i,".item__error[data-v-fec1d22e]{color:#f56c6c;font-size:11px;line-height:1;padding-top:4px;position:absolute}",""]),t.exports=e},567:function(t,e,r){"use strict";r.r(e);r(14),r(25);var o=r(3),n=r(428),l=r(429),d=r(433),c=r(434),v=r.n(c),_={middleware:"auth",components:{Breadcrumbs:n.default,"my-upload":d.a,Treeselect:v.a},data:function(){return{apiImgUrl:"http://decor.local/",breadcrumbsItems:[{title:"Заказы",name:"orders"},{title:"Редактирование",name:"orders-id",params:"id: "+this.$route.params.id}],order:{},bouquets:[],flowers:[],statuses:[{id:0,label:"новый"},{id:1,label:"обработан ( не оплачен )"},{id:2,label:"обработан ( оплачен )"},{id:3,label:"передан исполнителю"},{id:4,label:"принят исполнителем"},{id:5,label:"доставлен"},{id:6,label:"на удержани"}],bouquetOrder:"",flowerOrder:"",orderData:[],totalPrice:"",loading:!1,loadingOptions:!1,errors:new l.a,editField:"",oldValueField:""}},fetch:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$permission(["*"])){e.next=3;break}return e.next=3,t.$router.push({name:"index"});case 3:return e.next=5,t.getEditData();case 5:case"end":return e.stop()}}),e)})))()},methods:{getItemOptionsData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("http://decor.local/api/adm/orders/options/data");case 2:(r=e.sent)&&(t.orders=r.data);case 4:case"end":return e.stop()}}),e)})))()},getEditData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("http://decor.local/api"+"/adm/orders/".concat(t.$route.params.id));case 2:(r=e.sent)&&(t.order=r.data,t.product.image&&(t.photo="http://decor.local/image/"+t.product.image,t.showPhoto=!0),t.product.description);case 4:case"end":return e.stop()}}),e)})))()},update:function(){var t=this;this.loading=!0,this.order.total_price=this.totalPrice,this.$axios.patch("http://decor.local/api"+"/adm/orders/".concat(this.$route.params.id),{order:this.order,order_data:this.orderData}).then((function(e){"success"===e.data.data.status&&t.$message({showClose:!0,message:"Успешно обновлено",type:"success",center:!0})})).catch((function(e){return t.errors.record(e.response.data)})).finally((function(){t.loading=!1}))},bouquetSelect:function(){console.log(this.bouquetOrder),this.orderData.push(this.bouquetOrder),this.totalPrice=+this.totalPrice+ +this.bouquetOrder.price,this.bouquetOrder=""},flowerSelect:function(){console.log(this.flowerOrder),this.orderData.push(this.flowerOrder),this.totalPrice=+this.totalPrice+ +this.flowerOrder.price,this.flowerOrder=""},removeOrderData:function(t,e){this.totalPrice=+this.totalPrice-+e,this.orderData.splice(t,1)},focusField:function(t){this.editField=t},saveOldValue:function(t){this.oldValueField=t},blurField:function(t){this.editField="",t?this.oldValueField!==t.target.value&&(this.update(),this.oldValueField=""):(this.update(),this.oldValueField="")},showField:function(t){return""==this.order[t]||this.editField==t}}},h=(r(544),r(2)),component=Object(h.a)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Breadcrumbs",{attrs:{title:"Заказы",items:t.breadcrumbsItems}}),t._v(" "),r("div",{staticClass:"kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"kt-portlet"},[r("div",{staticClass:"kt-portlet__head"},[r("div",{staticClass:"kt-portlet__head-label"},[r("n-link",{staticClass:"btn btn-secondary",attrs:{to:{name:"orders"}}},[r("i",{staticClass:"fa fa-arrow-left",attrs:{"aria-hidden":"true"}}),t._v("\n                                В таблицу\n                            ")])],1)]),t._v(" "),r("form",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingOptions,expression:"loadingOptions"}],staticClass:"kt-form",attrs:{role:"form"},on:{submit:function(e){return e.preventDefault(),t.update(e)}}},[r("div",{staticClass:"kt-portlet__body"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group "},[r("el-select",{staticClass:"form-control fixed-select",attrs:{name:"status",filterable:"",placeholder:"Выберите статус"},model:{value:t.order.status,callback:function(e){t.$set(t.order,"status",e)},expression:"order.status"}},t._l(t.statuses,(function(t){return r("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})})),1)],1)]),t._v(" "),r("div",{staticClass:"col-md-4"},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"kt-form__actions"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Сохранить")])])])]),t._v(" "),t._m(0),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-3"},[r("div",{staticClass:"form-group"},[r("label",[t._v("Имя")]),t._v(" "),r("div",[t._v(t._s(t.order.name))])])]),t._v(" "),r("div",{staticClass:"col-md-3"},[r("div",{staticClass:"form-group"},[r("label",[t._v("Телефон")]),t._v(" "),r("div",[t._v(t._s(t.order.phone))])])]),t._v(" "),r("div",{staticClass:"col-md-3"},[r("div",{staticClass:"form-group"},[r("label",[t._v("Email")]),t._v(" "),r("div",[t._v(t._s(t.order.email))])])]),t._v(" "),r("div",{staticClass:"col-md-3"},[r("div",{staticClass:"form-group"},[r("label",[t._v("Дата заказа")]),t._v(" "),r("div",[t._v(t._s(t.order.created_at))])])])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"form-group"},[r("label",[t._v("Комментарий")]),t._v(" "),r("div",[t._v(t._s(t.order.comment))])])])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"form-group"},[r("label",[t._v("Список товаров")]),t._v(" "),r("table",{staticClass:"table table-bordered"},[t._m(1),t._v(" "),t._l(t.order.product_id,(function(e){return r("tr",[r("td",[r("img",{attrs:{src:t.apiImgUrl+"image/"+e.image,width:"100"}})]),t._v(" "),r("td",[t._v("\n                                                    "+t._s(e.sku)+"\n                                                ")]),t._v(" "),r("td",[t._v("\n                                                    "+t._s(e.description.name)+"\n                                                ")])])}))],2)])])])])])])])])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3"},[e("h5",{staticStyle:{color:"#464646"}},[this._v("Заказчик")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",[this._v("Фото")]),this._v(" "),e("th",[this._v("Атикул")]),this._v(" "),e("th",[this._v("Название")])])}],!1,null,"fec1d22e",null);e.default=component.exports;installComponents(component,{Breadcrumbs:r(428).default})}}]);