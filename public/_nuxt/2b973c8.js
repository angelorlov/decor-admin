(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{428:function(t,e,r){"use strict";r.r(e);var o={props:{title:{type:String,default:""},items:{type:Array,default:function(){return[]}}},data:function(){return{monthName:"",day:""}},mounted:function(){var t=new Date;this.monthName=["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"][t.getMonth()],this.day=t.getDate()}},n=r(2),component=Object(n.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"kt-subheader   kt-grid__item",attrs:{id:"kt_subheader"}},[r("div",{staticClass:"kt-container  kt-container--fluid "},[r("div",{staticClass:"kt-subheader__main"},[r("h3",{staticClass:"kt-subheader__title"},[t._v(t._s(t._f("capitalize")(t.title)))]),t._v(" "),r("span",{staticClass:"kt-subheader__separator kt-hidden"}),t._v(" "),r("div",{staticClass:"kt-subheader__breadcrumbs"},[r("n-link",{staticClass:"kt-subheader__breadcrumbs-home",attrs:{to:{path:"/"}}},[r("i",{staticClass:"flaticon2-shelter"})]),t._v(" "),t._l(t.items,(function(e,i){return[r("span",{staticClass:"kt-subheader__breadcrumbs-separator"}),t._v(" "),r("n-link",{staticClass:"kt-subheader__breadcrumbs-link",attrs:{to:{name:e.name,params:e.params}}},[t._v("\n                    "+t._s(t._f("capitalize")(e.title))+" ")])]}))],2)]),t._v(" "),r("div",{staticClass:"kt-subheader__toolbar"},[r("div",{staticClass:"kt-subheader__wrapper"},[r("a",{staticClass:"btn btn-sm btn-elevate btn-brand btn-elevate",attrs:{href:"#",id:"kt_dashboard_daterangepicker","data-toggle":"kt-tooltip",title:"","data-placement":"left","data-original-title":"Йо! Это я, сегодняшняя дата!"}},[r("span",{staticClass:"kt-opacity-7",attrs:{id:"kt_dashboard_daterangepicker_title"}},[t._v("Сегодня:")]),t._v(" \n                    "),r("span",{staticClass:"kt-font-bold",attrs:{id:"kt_dashboard_daterangepicker_date"}},[t._v(t._s(t.monthName)+" "+t._s(t.day))]),t._v(" "),r("i",{staticClass:"flaticon-calendar-with-a-clock-time-tools kt-padding-l-5 kt-padding-r-0"})])])])])])}),[],!1,null,"06a05328",null);e.default=component.exports},429:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var o=r(430),n=r(431),c=function(){function t(){Object(o.a)(this,t),this.errors={}}return Object(n.a)(t,[{key:"get",value:function(t){if(this.errors[t])return this.errors[t][0]}},{key:"record",value:function(t){this.errors=t.errors}}]),t}()},455:function(t,e,r){var content=r(543);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(8).default)("2a6b83db",content,!0,{sourceMap:!1})},542:function(t,e,r){"use strict";var o=r(455);r.n(o).a},543:function(t,e,r){(e=r(7)(!1)).push([t.i,".item__error[data-v-b5000a5a]{color:#f56c6c;font-size:11px;line-height:1;padding-top:4px;position:absolute}",""]),t.exports=e},566:function(t,e,r){"use strict";r.r(e);r(14),r(25);var o=r(3),n=(r(31),r(433)),c=r(434),l=r.n(c),d=(r(435),r(428)),m=r(429),v=r(436),_=r.n(v),h={middleware:"auth",components:{Breadcrumbs:d.default,"my-upload":n.a,Treeselect:l.a},data:function(){return{apiImgUrl:"http://decor.local/",breadcrumbsItems:[{title:"Категории",name:"categories"},{title:"Редактирование",name:"categories-id",params:"id: "+this.$route.params.id}],category:{},photo:"",statuses:[{label:"Включено",value:1},{label:"Отключено",value:0}],categories:[],sortValueBy:"ORDER_SELECTED",show:!1,showPhoto:!1,params:{name:"photo"},loading:!1,errors:new m.a}},computed:{iSlug:function(){if(this.category.name){var t=this.sanitizeTitle(this.category.name);return this.category.slug=t,t}}},fetch:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$permission(["*"])){e.next=3;break}return e.next=3,t.$router.push({name:"index"});case 3:return e.next=5,t.getItemOptionsData();case 5:return e.next=7,t.getEditData();case 7:case"end":return e.stop()}}),e)})))()},methods:{getItemOptionsData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("http://decor.local/api/adm/categories/options/data",{params:{id:t.$route.params.id}});case 2:(r=e.sent)&&(t.categories=r.data);case 4:case"end":return e.stop()}}),e)})))()},getEditData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("http://decor.local/api"+"/adm/categories/".concat(t.$route.params.id));case 2:(r=e.sent)&&(t.category=r.data,t.category.description&&(t.category.name=t.category.description.name,t.category.seo_title=t.category.description.seo_title,t.category.meta_description=t.category.description.meta_description,t.category.meta_keyword=t.category.description.meta_keyword),t.category.image&&(t.photo="http://decor.local/image/"+t.category.image,t.showPhoto=!0),null===t.category.parent_id&&(t.category.parent_id=0));case 4:case"end":return e.stop()}}),e)})))()},update:function(){var t=this;this.loading=!0,0===this.category.parent_id&&(this.category.parent_id=null),this.category.description&&(this.category.description.name=this.category.name,this.category.description.seo_title=this.category.seo_title,this.category.description.meta_description=this.category.meta_description,this.category.description.meta_keyword=this.category.meta_keyword),this.$delete(this.category,"dates"),this.$axios.patch("http://decor.local/api"+"/adm/categories/".concat(this.$route.params.id),{category:this.category,photo:this.photo}).then((function(e){"success"===e.data.data.status&&t.$message({showClose:!0,message:"Успешно обновлено",type:"success",center:!0})})).catch((function(e){return t.errors.record(e.response.data)})).finally((function(){t.loading=!1}))},sanitizeTitle:function(t){return _()(t)},toggleShow:function(){this.show=!this.show},cropSuccess:function(t){this.photo=t,this.showPhoto=!0}}},f=(r(542),r(2)),component=Object(f.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Breadcrumbs",{attrs:{title:"Категории",items:t.breadcrumbsItems}}),t._v(" "),r("div",{staticClass:"kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"kt-form",attrs:{role:"form"},on:{submit:function(e){return e.preventDefault(),t.update(e)}}},[r("div",{staticClass:"kt-portlet"},[r("div",{staticClass:"kt-portlet__head"},[r("div",{staticClass:"kt-portlet__head-label"},[r("n-link",{staticClass:"btn btn-secondary",attrs:{to:{name:"categories"}}},[r("i",{staticClass:"fa fa-arrow-left",attrs:{"aria-hidden":"true"}}),t._v("\n                                    В таблицу\n                                ")])],1),t._v(" "),t._m(0)]),t._v(" "),r("div",{staticClass:"kt-portlet__body"},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.showPhoto,expression:"showPhoto"}],staticClass:"row"},[r("div",{staticClass:"col-md-2"},[r("img",{staticStyle:{"border-radius":"50%",width:"100%",height:"auto"},attrs:{src:t.photo}})])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-2"},[r("a",{staticClass:"btn btn-success btn-sm btn-block",staticStyle:{color:"white",margin:"10px 0"},on:{click:t.toggleShow}},[r("span",{directives:[{name:"show",rawName:"v-show",value:t.showPhoto,expression:"showPhoto"}]},[t._v("Изменить фото")]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:!t.showPhoto,expression:"!showPhoto"}]},[t._v("Добавить фото")])])]),t._v(" "),r("my-upload",{attrs:{field:"img",params:t.params,langType:"ru"},on:{"crop-success":t.cropSuccess},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group"},[r("label",[t._v("Название")]),t._v(" "),r("span",{staticStyle:{display:"none"}},[t._v(" "+t._s(t.iSlug))]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.category.name,expression:"category.name"}],class:t.errors.get("name")?"form-control is-invalid":"form-control",attrs:{type:"text",placeholder:"Введите название категории",required:""},domProps:{value:t.category.name},on:{input:function(e){e.target.composing||t.$set(t.category,"name",e.target.value)}}}),t._v(" "),r("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.get("name")))])])]),t._v(" "),r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group"},[r("label",[t._v("Seo Url")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.category.slug,expression:"category.slug"}],class:t.errors.get("slug")?"form-control is-invalid":"form-control",attrs:{type:"text",placeholder:"",readonly:""},domProps:{value:t.category.slug},on:{input:function(e){e.target.composing||t.$set(t.category,"slug",e.target.value)}}}),t._v(" "),r("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.errors.get("slug")))])])]),t._v(" "),r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group "},[r("label",[t._v("Категория")]),t._v(" "),r("treeselect",{attrs:{options:t.categories,"sort-value-by":t.sortValueBy,"show-count":!0,placeholder:"Выберите категорию",required:""},model:{value:t.category.parent_id,callback:function(e){t.$set(t.category,"parent_id",e)},expression:"category.parent_id"}})],1)]),t._v(" "),r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group "},[r("label",[t._v("Статус")]),t._v(" "),r("el-select",{staticClass:"form-control fixed-select",attrs:{filterable:"",placeholder:"Выберите статус"},model:{value:t.category.status,callback:function(e){t.$set(t.category,"status",e)},expression:"category.status"}},t._l(t.statuses,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)])]),t._v(" "),r("div",{staticClass:"card"},[t._m(1),t._v(" "),r("div",{staticClass:"card-body"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group"},[r("label",[t._v("Seo заголовок")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.category.seo_title,expression:"category.seo_title"}],staticClass:"form-control",attrs:{type:"text",placeholder:""},domProps:{value:t.category.seo_title},on:{input:function(e){e.target.composing||t.$set(t.category,"seo_title",e.target.value)}}})])])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group form-group-last"},[r("label",[t._v("Seo описание")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.category.meta_description,expression:"category.meta_description"}],staticClass:"form-control",attrs:{rows:"4"},domProps:{value:t.category.meta_description},on:{input:function(e){e.target.composing||t.$set(t.category,"meta_description",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group form-group-last"},[r("label",[t._v("Seo ключевые слова")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.category.meta_keyword,expression:"category.meta_keyword"}],staticClass:"form-control",attrs:{rows:"4"},domProps:{value:t.category.meta_keyword},on:{input:function(e){e.target.composing||t.$set(t.category,"meta_keyword",e.target.value)}}})])])])])])]),t._v(" "),r("div",{staticClass:"kt-portlet__foot"},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"kt-form__actions"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Сохранить")])])])])])])])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"kt-portlet__head-label"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[this._v("Сохранить")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header",attrs:{id:"headingOne3"}},[e("div",{staticClass:"card-title collapsed",attrs:{"data-toggle":"collapse","data-target":"#collapseOne3","aria-expanded":"false","aria-controls":"collapseOne3"}},[this._v("\n                                        SEO\n                                    ")])])}],!1,null,"b5000a5a",null);e.default=component.exports;installComponents(component,{Breadcrumbs:r(428).default})}}]);